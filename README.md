Данный набор playbooks ansible настраивает конфигурацию Веб-сервера с базой данных MySQL и средством администрирования БД PhpMyAdmin.

Полную установку можно выполнить с помощью команды ansible-playbook Full_Install.yml

Так же Full_Install.yml содержит тэги для выборочной установки и конфигурации сервера.

ansible-playbook Full_Install.yml --tags setup_web

Первая роль устанавливает необходимые пакеты для работы HAProxy, и пакета для работы Iptables(фаерволл).
Так же производится начальное конфигурирование этих служб:
- HAProxy - настраивается как балансировщик нагрузки с постоянным соединением с сервером в случае работы с динамическими данными(cookie).
- Iptables - устанавливается пакет netfilter-persistent для работы с правилами брандмауэра, так же происходит применения правил безопасности.

ansible-playbook Full_Install.yml --tags sql_setup

Вторая роль производит установку и начальные настройки Сервера Базы Данных MySQL:
- Устанавливается разрешение на доступ к серверу.
- Устанавливает root пароль для суперпользователя.
- Создает тестовую базу данных test_db.
- Создает пользователя test1(пароль:123456) для работы на сервере БД.
- Создает тестовую таблицу в базе данных test_db.
Переменные паролей и названия БД заданы отдельно в defaults.

ansible-playbook Full_Install.yml --tags docker_setup

- Третья роль устанавливает DOCKER из собственного репозитария, изначально установив необходимые для работы DOCKER пакеты.

ansible-playbook Full_Install.yml --tags add_container

- Четвертая роль сначала делает pull образа докер с DockerHub.
Далее разворачивает два образа с пробросом протов из контейнеров.

Образ DOCKER основан на Linux/CentOS8, в него установлены nginx с php-fpm, а также на веб сервере доступен PhpMyAdmin. Ознакомиться с образом докера и его сборкой можно в дериктории Docker.
Через PhpMyAdmin можно получить доступ к локальной БД для дальнейшей работы с ней.

Вход на веб сервер доступен по адресу (нужно пробросить 80порт наружу либо зайти по локальному ip внутри сети).
На Стартовой странице присутствует единственная ссылка на сервис Phpmyadmin для работы с БД.

